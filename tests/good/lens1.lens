lens propLens () {
     {
        print("\n--- New Session ---");
        sessionTime = 0;
    }

    match {
       	"Process (?<process>\w+)";
        "execution time (?<time>\d+)s# time:int"
    }
    
    stream (entry in log) {
        print(entry.process + ": " + entry.time);
        sessionTime += entry.time;
    }
    
     {
        print("\n- Session Time: " + sessionTime + "\n");
    }
    
    stream (entry in log) when (entry.time) {
        entry.prop = (entry.time / sessionTime) * 100;
    }
    
    stream (entry in log) {
        var prop = entry.prop;
        print(entry.process + ": " + prop.toFixed(2) + "%");
    }
}
    
match {
    "Session (?<date>\d\d-\d\d-\d\d\d\d)"   
}

group (entry) upon entry.date in session {
    "^"
}

stream (entry) when (entry){
    propLens(entry.session)
}
